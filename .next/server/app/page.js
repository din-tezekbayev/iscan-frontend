(()=>{var e={};e.id=931,e.ids=[931],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},2413:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>u,tree:()=>o});var r=t(7096),a=t(6132),i=t(7284),l=t.n(i),d=t(2564),n={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>d[e]);t.d(s,n);let o=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,5909)),"/Users/dinmukhamed/Projects/IPing/scan-documents/iscan-frontend/src/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,7366)),"/Users/dinmukhamed/Projects/IPing/scan-documents/iscan-frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9291,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/dinmukhamed/Projects/IPing/scan-documents/iscan-frontend/src/app/page.tsx"],x="/page",m={require:t,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},2386:(e,s,t)=>{Promise.resolve().then(t.bind(t,3431)),Promise.resolve().then(t.bind(t,4707))},4707:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>FileUpload});var r=t(784),a=t(9885),i=t(2170),l=t(4070),d=t(1778),n=t(4944),o=t(5035);function FileUpload(){let[e,s]=(0,a.useState)(1),t=(0,l.NL)(),{data:c=[]}=(0,d.a)({queryKey:["fileTypes"],queryFn:o.eL.getFileTypes}),x=(0,n.D)({mutationFn:s=>o.jf.upload(s,e),onSuccess:()=>{t.invalidateQueries({queryKey:["files"]})}}),m=(0,a.useCallback)(e=>{e.forEach(e=>{"application/pdf"===e.type||e.name.toLowerCase().endsWith(".pdf")?x.mutate(e):alert("Please upload PDF files only")})},[x]),{getRootProps:u,getInputProps:p,isDragActive:h}=(0,i.uI)({onDrop:m,accept:{"application/pdf":[".pdf"]},multiple:!0});return r.jsx("div",{className:"space-y-6",children:(0,r.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[r.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Upload Documents"}),(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("label",{htmlFor:"fileType",className:"block text-sm font-medium text-gray-700 mb-2",children:"Document Type"}),r.jsx("select",{id:"fileType",value:e,onChange:e=>s(Number(e.target.value)),className:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",children:c.map(e=>r.jsx("option",{value:e.id,children:e.name},e.id))})]}),(0,r.jsxs)("div",{...u(),className:`
            border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-colors
            ${h?"border-blue-400 bg-blue-50":"border-gray-300 hover:border-gray-400"}
            ${x.isPending?"opacity-50 cursor-not-allowed":""}
          `,children:[r.jsx("input",{...p()}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:r.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),r.jsx("div",{className:"text-sm text-gray-600",children:x.isPending?r.jsx("p",{className:"text-blue-600",children:"Uploading..."}):h?r.jsx("p",{className:"text-blue-600",children:"Drop the files here..."}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("p",{children:[r.jsx("span",{className:"font-medium text-blue-600 hover:text-blue-500",children:"Click to upload"})," ","or drag and drop"]}),r.jsx("p",{className:"text-xs",children:"PDF files only"})]})})]})]}),x.isError&&r.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-md",children:(0,r.jsxs)("p",{className:"text-sm text-red-700",children:["Upload failed: ",x.error?.message]})}),x.isSuccess&&r.jsx("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-md",children:r.jsx("p",{className:"text-sm text-green-700",children:"File uploaded successfully and queued for processing!"})})]})})}},3431:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>FilesDashboard});var r=t(784),a=t(9885),i=t.n(a),l=t(1778),d=t(4944),n=t(5035);let o={uploaded:"bg-gray-100 text-gray-800",queued:"bg-yellow-100 text-yellow-800",processing:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800"};function FilesDashboard(){let[e,s]=(0,a.useState)(""),[t,c]=(0,a.useState)(null),[x,m]=(0,a.useState)(new Set),{data:u=[],isLoading:p,refetch:h}=(0,l.a)({queryKey:["files",e],queryFn:()=>n.jf.getFiles(e||void 0),refetchInterval:15e3}),g=(0,d.D)({mutationFn:e=>n.jf.exportFileJSON(e),onSuccess:e=>{alert(`JSON export started! Task ID: ${e.task_id}`)},onError:e=>{alert("Export failed: "+(e?.response?.data?.detail||e.message))}}),handleDownloadResults=async e=>{try{let s=await n.jf.getFileResults(e.id);c(s)}catch(e){alert("Failed to fetch results: "+(e?.response?.data?.detail||e.message))}},handleExportJSON=e=>{g.mutate(e)},y=u.reduce((e,s)=>(e[s.status]=(e[s.status]||0)+1,e),{}),b=i().useMemo(()=>{let e=new Map;return u.forEach(s=>{let t=s.batch_id?.toString()||"individual";e.has(t)||e.set(t,{batch_id:s.batch_id||null,batch_name:s.batch_name||"Individual Files",files:[]}),e.get(t).files.push(s)}),e.forEach(e=>{e.files.sort((e,s)=>s.id-e.id)}),Array.from(e.values()).sort((e,s)=>{let t=Math.max(...e.files.map(e=>e.id)),r=Math.max(...s.files.map(e=>e.id));return r-t})},[u]),toggleBatchExpansion=e=>{let s=new Set(x);s.has(e)?s.delete(e):s.add(e),m(s)};return(i().useEffect(()=>{if(b.length>0&&0===x.size){let e=b.map(e=>e.batch_id?.toString()||"individual");m(new Set(e))}},[b.length]),p)?r.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:(0,r.jsxs)("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-4"}),r.jsx("div",{className:"space-y-3",children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>r.jsx("div",{className:"h-4 bg-gray-200 rounded"},s))})]})}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[r.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Processing Status"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:Object.entries(y).map(([t,a])=>(0,r.jsxs)("div",{className:"text-center p-3 rounded-lg border cursor-pointer hover:bg-gray-50",onClick:()=>s(e===t?"":t),children:[r.jsx("div",{className:"text-2xl font-bold text-gray-900",children:a}),r.jsx("div",{className:`text-sm font-medium px-2 py-1 rounded-full ${o[t]}`,children:t.charAt(0).toUpperCase()+t.slice(1)})]},t))})]}),(0,r.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[(0,r.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[(0,r.jsxs)("h2",{className:"text-lg font-medium text-gray-900",children:["Files by Batch ",e&&`(${e})`]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:()=>s(""),className:`px-3 py-1 rounded-md text-sm font-medium ${e?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-blue-100 text-blue-800"}`,children:"All"}),r.jsx("button",{onClick:()=>h(),className:"px-3 py-1 rounded-md text-sm font-medium bg-gray-100 text-gray-700 hover:bg-gray-200",children:"Refresh"})]})]}),0===b.length?r.jsx("div",{className:"px-6 py-12 text-center",children:r.jsx("p",{className:"text-gray-500",children:e?`No files with status "${e}"`:"No files uploaded yet"})}):r.jsx("div",{className:"divide-y divide-gray-200",children:b.map(e=>{let s=e.batch_id?.toString()||"individual",t=x.has(s);return(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between cursor-pointer hover:bg-gray-50 p-2 rounded",onClick:()=>toggleBatchExpansion(s),children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"flex-shrink-0",children:t?r.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}):r.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-gray-900",children:e.batch_name}),(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:[e.files.length," file",1!==e.files.length?"s":"",e.batch_id&&` â€¢ Batch ID: ${e.batch_id}`]})]})]}),r.jsx("div",{className:"flex space-x-2",children:Object.entries(e.files.reduce((e,s)=>(e[s.status]=(e[s.status]||0)+1,e),{})).map(([e,s])=>r.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${o[e]}`,children:s},e))})]}),t&&r.jsx("div",{className:"mt-4 overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"File Name"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Uploaded"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.files.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.original_name}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:["ID: ",e.id]})]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${o[e.status]}`,children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.created_at).toLocaleString()}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:("completed"===e.status||"failed"===e.status)&&(0,r.jsxs)("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:()=>handleDownloadResults(e),className:"text-blue-600 hover:text-blue-900",children:"View Results"}),r.jsx("button",{onClick:()=>handleExportJSON(e.id),disabled:g.isPending,className:"text-green-600 hover:text-green-900 disabled:text-gray-400",children:g.isPending?"Exporting...":"Export JSON"})]})})]},e.id))})]})})]},s)})})]}),t&&r.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[80vh] overflow-hidden",children:[(0,r.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[(0,r.jsxs)("h3",{className:"text-lg font-medium text-gray-900",children:["Processing Results - ",t.file_name]}),r.jsx("button",{onClick:()=>c(null),className:"text-gray-400 hover:text-gray-600",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsxs)("div",{className:"px-6 py-4 overflow-y-auto max-h-[60vh]",children:[t.error_message?(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:[r.jsx("h4",{className:"text-red-800 font-medium mb-2",children:"Error Message:"}),r.jsx("p",{className:"text-red-700",children:t.error_message})]}):r.jsx("div",{className:"space-y-4",children:(0,r.jsxs)("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Extracted Data:"}),r.jsx("pre",{className:"bg-gray-50 p-4 rounded-md overflow-x-auto text-sm",children:JSON.stringify(t.result_data,null,2)})]})}),(0,r.jsxs)("div",{className:"mt-4 text-sm text-gray-500",children:[(0,r.jsxs)("p",{children:["Processed: ",new Date(t.created_at).toLocaleString()]}),(0,r.jsxs)("p",{children:["Batch ID: ",t.batch_id]})]})]}),(0,r.jsxs)("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end space-x-3",children:[r.jsx("button",{onClick:()=>handleExportJSON(t.file_id),disabled:g.isPending,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:bg-gray-400",children:"Export JSON"}),r.jsx("button",{onClick:()=>c(null),className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",children:"Close"})]})]})})]})}},5909:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>Home});var r=t(4656),a=t(5153);let i=(0,a.createProxy)(String.raw`/Users/dinmukhamed/Projects/IPing/scan-documents/iscan-frontend/src/components/FileUpload.tsx`),{__esModule:l,$$typeof:d}=i,n=i.default,o=(0,a.createProxy)(String.raw`/Users/dinmukhamed/Projects/IPing/scan-documents/iscan-frontend/src/components/FilesDashboard.tsx`),{__esModule:c,$$typeof:x}=o,m=o.default;function Home(){return(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"px-4 sm:px-0",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Document Processing"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"Upload PDF documents for automated processing and data extraction."})]}),r.jsx(n,{}),r.jsx(m,{})]})}}};var s=require("../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[20,391,170,827,525],()=>__webpack_exec__(2413));module.exports=t})();